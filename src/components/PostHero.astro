---
import type { ImageMetadata } from "astro";
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";

interface Props {
  postHero: CollectionEntry<"blog"> | undefined;
}

const { postHero } = Astro.props;
const images = import.meta.glob<{ default: ImageMetadata }>("/src/images/*");
---

{
  postHero && (
    <article>
      <a href={`posts/${postHero.slug}`}>
        <Image
          class="mb-6 mt-8 aspect-video w-full object-cover shadow-xl"
          src={images[postHero.data.image]()}
          alt=""
          loading={"eager"}
          format="avif"
          width={1112}
          height={626}
          widths={[240, 540, 720, 1024]}
          sizes={
            "(max-width: 360px) 240px, (max-width: 720px) 540px, (max-width: 1600px) 720px, 1024px"
          }
        />
      </a>
      <div class="grid gap-x-6 sm:grid-cols-2">
        <h1>
          <a href={`post/${postHero.slug}`} class="hover:underline">
            {postHero.data.title}
          </a>
        </h1>
        <div>
          <p class="mb-4 mt-4 text-base text-gray-700 antialiased sm:mt-0">
            {postHero.data.excerpt}
          </p>
          <div class="w-50 flex text-base font-semibold text-gray-800">{postHero.data.author}</div>
        </div>
      </div>
    </article>
  )
}
